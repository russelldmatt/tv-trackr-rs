<head>
  <!-- /Users/mrussell/code/rust/tv-trackr/templates/ -->
  <link href="/static/head.html" rel="import" />
  <link href="/static/styles.css" type="text/css" rel="stylesheet" />

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script type="text/javascript">
   ClickedId = function(id) {
       var resultDiv = $("#response_from_server");
       
       var hidden_id = "#hidden_" + id
       console.log("hidden id: " + hidden_id);
       var hidden_div = $(hidden_id)
       console.log("hidden_div.html: " + hidden_div.html());
       if (hidden_div.css("display") == "none") {
           hidden_div.css("display", "")
       } else {
           hidden_div.css("display", "none")
       }

       /* console.log("hidden_div.style: " + hidden_div.style());
        * hidden_div.style.display = "inline";
        */
       $.ajax({
           url: "http://localhost:3000/test-post",
           type: "POST",
           data: { id: id },
           dataType: "json",
           success: function (result) {
	       resultDiv.html(result)
           },
           error: function (xhr, ajaxOptions, thrownError) {
	       alert(xhr.status);
	       alert(thrownError);
           }
       });
   };
  </script>
</head>
<body>
  <div id="response_from_server"></div>
  {{#each shows as |show|}}
    <div>
	    <h3>{{ name }}</h3>
	    <div style="white-space:nowrap">
	      {{#each show.episodes as |episode|}}
                <div id="hidden_{{ episode.unique_id }}" class="hidden-box" onclick="ClickedId('{{ episode.unique_id }}')" style="display: none;">
                  Hidden!
                </div>
		<div class="box {{ seen_class }}" onclick="ClickedId('{{ episode.unique_id }}')">
		  Season {{ episode.episode.season }}, Episode {{ episode.episode.episode }}<br />
		  <span class="aire_date">{{ date episode.episode.aire_date }}</span><br />
		  {{ episode.episode.name }}
		</div>
              {{/each}}
	    </div>
	  </div>
  {{/each}}
</body>
